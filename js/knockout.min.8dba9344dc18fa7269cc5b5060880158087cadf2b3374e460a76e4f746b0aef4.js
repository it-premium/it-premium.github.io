function Package(name){var self=this;self.name=name;self.value=ko.observable(0);}
function Proposition(obj){var self=this;self.id=obj.id;self.name=obj.name;self.price=obj.price;self.label='proposition_'+obj.id.toString();self.input_name=obj.input_name;self.has_input=obj.has_input;self.value=ko.observable(obj.default_selected||1);self.checked=ko.observable(obj.default_selected);self.incrementCounter=function(){self.value(self.value()+1);self.checked(true);};self.decrementCounter=function(){if(self.value()>1){self.value(self.value()-1);}else{self.value(0);self.checked(false);}};}
var FrontendViewModel=function(){var self=this;self.propositions=ko.observableArray();self.packages=ko.observableArray();self.toggler=ko.observable(false);self.selectedPackage=function(name){return self.packages().filter(item=>item.name==name)[0];};self.toggleBack=()=>{self.toggler(!self.toggler());};self.calculate=function(){let map_price=self.propositions().map(item=>item.checked()?item.price*item.value():0);const reducer=(accumulator,currentValue)=>accumulator+currentValue;let sum=map_price.reduce(reducer);self.selectedPackage('start').value(500);self.selectedPackage('classic').value(sum);self.selectedPackage('gold').value(sum*1.5);self.selectedPackage('premium').value(sum*2);self.toggler(!self.toggler());};};window.frontend=new FrontendViewModel();window.frontend.packages.push(new Package('start',500));window.frontend.packages.push(new Package('classic'));window.frontend.packages.push(new Package('gold'));window.frontend.packages.push(new Package('premium'));window.data.forEach(function(item){window.frontend.propositions.push(new Proposition(item));});ko.applyBindings(frontend);